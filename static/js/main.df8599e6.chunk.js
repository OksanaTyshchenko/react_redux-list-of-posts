(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),s=n(4),a=n(16),o=n(6),i=n(7),u=n(3),l=n.n(u),m=n(0),j="https://mate.academy/students-api";function b(e){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=6;break}return e.next=3,fetch("".concat(j,"/posts"));case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,fetch("".concat(j,"/posts?userId=").concat(t));case 8:n=e.sent;case 9:return e.abrupt("return",n.json());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/posts/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){fetch("".concat(j,"/posts/").concat(e),{method:"DELETE"})}n(26),n(27);var h=n(17),x=n(2),v="LOAD_POSTS",_="SELECT_POST",y="DELETE_POST",E="LOAD_COMMENTS",N="LOAD_ONEPOST",w="ADD_COMMENT",S="REMOVE_COMMENT",C=function(e){return{type:v,posts:e}},D=function(e){return{type:_,postId:e}},P=function(e){return{type:E,comments:e}},k=function(e){return{type:N,post:e}},T=function(e){return{type:w,newComment:e}},A=function(e){return{type:S,commentId:e}},L=function(e){return{type:y,postId:e}},R=function(e){return e.mainState.posts},I=function(e){return e.mainState.postId},g=function(e){return e.mainState.comments},M=function(e){return e.mainState.selectedPost},F={posts:[],postId:null,comments:[],selectedPost:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(x.a)(Object(x.a)({},e),{},{posts:t.posts});case _:return Object(x.a)(Object(x.a)({},e),{},{postId:t.postId});case y:return Object(x.a)(Object(x.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case E:return Object(x.a)(Object(x.a)({},e),{},{comments:t.comments});case N:return Object(x.a)(Object(x.a)({},e),{},{selectedPost:t.post});case w:return Object(x.a)(Object(x.a)({},e),{},{comments:[].concat(Object(h.a)(e.comments),[t.newComment])});case S:return Object(x.a)(Object(x.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.commentId}))});default:return e}},U=(n(28),n(1)),J=function(){var e=Object(s.c)(R),t=Object(s.c)(I),n=Object(s.b)(),r=Object(m.useCallback)((function(e){n(D(t===e?null:e))}),[t]),c=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:n(L(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"PostsList",children:[Object(U.jsx)("h2",{children:"Posts:"}),Object(U.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:null===e||void 0===e?void 0:e.map((function(e){return Object(U.jsxs)("li",{className:"PostsList__item",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("b",{children:"[User #".concat(e.userId||"no user","]:")}),e.title]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return r(e.id)},children:t===e.id?"Close":"Open"}),Object(U.jsx)("button",{type:"button",className:"PostsList__buttonDelete",onClick:function(){return c(e.id)},children:"\ud83d\uddd1"})]})]},e.id)}))})]})},B=(n(30),"https://mate.academy/students-api");function H(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(B,"/comments?postId=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}},e.next=3,fetch("".concat(B,"/comments"),n);case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q="ADD_USER_NAME",K="ADD_USER_EMAIL",X="CREATE_COMMENT",z="GET_USER_ERROR",Q="GET_EMAIL_ERROR",Z="GET_COMMENT_ERROR",$=function(e){return{type:q,name:e}},ee=function(e){return{type:K,email:e}},te=function(e){return{type:X,comment:e}},ne=function(e){return{type:z,error:e}},re=function(e){return{type:Q,error:e}},ce=function(e){return{type:Z,error:e}},se=function(e){return e.formState.userName},ae=function(e){return e.formState.userEmail},oe=function(e){return e.formState.newComment},ie=function(e){return e.formState.userError},ue=function(e){return e.formState.emailError},le=function(e){return e.formState.commentError},me={userName:"",userEmail:"",newComment:"",userError:null,emailError:null,commentError:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(x.a)(Object(x.a)({},e),{},{userName:t.name});case K:return Object(x.a)(Object(x.a)({},e),{},{userEmail:t.email});case X:return Object(x.a)(Object(x.a)({},e),{},{newComment:t.comment});case z:return Object(x.a)(Object(x.a)({},e),{},{userError:t.error});case Q:return Object(x.a)(Object(x.a)({},e),{},{emailError:t.error});case Z:return Object(x.a)(Object(x.a)({},e),{},{commentError:t.error});default:return e}},be=function(){var e=Object(s.c)(se),t=Object(s.c)(ae),n=Object(s.c)(oe),r=Object(s.c)(ie),c=Object(s.c)(ue),a=Object(s.c)(le),i=Object(s.c)(I),u=Object(s.b)(),m=function(e){var t=e.target,n=t.value;switch(t.name){case"name":u($(n)),u(ne(null));break;case"email":u(ee(n)),u(re(null));break;case"body":u(te(n)),u(ce(null));break;default:throw new Error("error")}},j=function(){var r=Object(o.a)(l.a.mark((function r(){var c,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c={postId:i,name:e,email:t,body:n},r.next=3,W(c);case 3:s=r.sent,u(T(s));case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(U.jsxs)("form",{className:"NewCommentForm",onSubmit:function(r){r.preventDefault(),(e.trim()?t.trim()?n.trim()||(u(ce("Please enter your comment")),0):(u(re("Please enter your email")),0):(u(ne("Please enter your name")),0))&&(j(),u($("")),u(ee("")),u(te("")),u(ne(null)),u(re(null)),u(ce(null)))},children:[Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:e,onChange:m})}),r&&Object(U.jsx)("p",{className:"Form__error",children:r}),Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:t,onChange:m,required:!0})}),c&&Object(U.jsx)("p",{className:"Form__error",children:c}),Object(U.jsx)("div",{className:"form-field",children:Object(U.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:n,onChange:m})}),a&&Object(U.jsx)("p",{className:"Form__error",children:a}),Object(U.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},pe=(n(31),function(){var e=Object(m.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(s.c)(I),a=Object(s.c)(M),u=Object(s.c)(g),j=Object(s.b)();Object(m.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(c);case 2:return t=e.sent,e.next=5,H(c);case 5:n=e.sent,j(k(t)),j(P(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var b=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,void fetch("".concat(B,"/comments/").concat(n),{method:"DELETE"});case 2:j(A(t));case 3:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"PostDetails","data-cy":"postDetails",children:[Object(U.jsx)("h2",{children:"Post details:"}),Object(U.jsx)("section",{className:"PostDetails__post",children:Object(U.jsx)("p",{children:null===a||void 0===a?void 0:a.body})}),Object(U.jsxs)("section",{className:"PostDetails__comments",children:[u.length>0&&Object(U.jsx)("button",{type:"button",className:"button",onClick:function(){return r((function(e){return!e}))},children:n?"Hide ".concat(u.length," comments"):"Show ".concat(u.length," comments")}),n&&Object(U.jsx)("ul",{className:"PostDetails__list",children:u.map((function(e){return Object(U.jsxs)("li",{className:"PostDetails__list-item",children:[Object(U.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return b(e.id)},children:"X"}),Object(U.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(U.jsx)("section",{children:Object(U.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(U.jsx)(be,{})})})]})}),de=function(){var e=Object(s.c)(I),t=Object(m.useState)(0),n=Object(i.a)(t,2),r=n[0],c=n[1],a=Object(s.b)();Object(m.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r);case 2:t=e.sent,a(C(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]);return Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)("header",{className:"App__header",children:Object(U.jsxs)("label",{children:["Select a user: \xa0",Object(U.jsxs)("select",{className:"App__user-selector",onChange:function(e){var t=e.target.value;c(+t)},children:[Object(U.jsx)("option",{value:"0",children:"All users"}),Object(U.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(U.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(U.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(U.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(U.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(U.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(U.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(U.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(U.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(U.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(U.jsxs)("main",{className:"App__main",children:[Object(U.jsx)("div",{className:"App__sidebar",children:Object(U.jsx)(J,{})}),Object(U.jsx)("div",{className:"App__content",children:e&&Object(U.jsx)(pe,{})})]})]})},Oe=n(11),fe=n(15),he=Object(Oe.combineReducers)({mainState:G,formState:je}),xe=Object(Oe.createStore)(he,Object(fe.composeWithDevTools)()),ve=function(){return Object(U.jsx)(s.a,{store:xe,children:Object(U.jsx)(a.a,{children:Object(U.jsx)(de,{})})})};c.a.render(Object(U.jsx)(ve,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.df8599e6.chunk.js.map